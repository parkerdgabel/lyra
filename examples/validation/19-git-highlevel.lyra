(*
  19-git-highlevel.lyra â€” High-level Git workflows
  Run: lyra-runner --file examples/validation/19-git-highlevel.lyra
*)

root := "target/tmp/git-hl";
MakeDirectory[root, <|"parents"->True|>];

GitEnsureRepo[<|"path"->root, "initialBranch"->"main", "GitIgnore"->"target\n*.log\n"|>];
GitStatusSummary[<|"cwd"->root|>];

(* feature branch *)
GitFeatureBranch[<|"cwd"->root, "name"->"feat/demo"|>];
WriteBytes[root<>"/demo.txt", "hello\n"];
GitSmartCommit[<|"cwd"->root, "autoMessage"->"true"|>];
GitStatusSummary[<|"cwd"->root|>];
